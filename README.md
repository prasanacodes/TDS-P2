# ğŸ§  Autonomous AI Quiz Solver Agent

A fully autonomous, multi-modal AI agent built with **FastAPI** and **Playwright**. This agent navigates dynamic web pages, analyzes mixed media (images, audio, text), plans a solution strategy, and generates/executes Python code to solve complex logic puzzles without human intervention.

## ğŸš€ Key Features

  * **Multi-LLM Architecture**: unique "Analyst-Developer" split workflow.
      * **The Analyst**: Analyzes the task, creates a strict JSON plan, and devises logic.
      * **The Developer**: Translates plans into executable Python code.
  * **Self-Healing Logic**: If a solution fails, the agent feeds the error trace back to the Analyst to generate a *new* strategy, not just retry the same code.
  * **Multi-Modal Capabilities**:
      * **Vision**: Uses GPT-4o to describe images and count objects.
      * **Audio**: Uses Whisper to transcribe hidden audio clues.
  * **Dynamic Scraping**: Uses **Playwright** to handle JavaScript-heavy sites and **BeautifulSoup** for static parsing.
  * **Sandboxed Execution**: Writes and runs generated Python code in real-time to perform calculations, file parsing, or logic puzzles.
  * **Asset Management**: Automatically downloads and maps all page assets (images, audio, zips) for local processing.

-----

## ğŸ› ï¸ Architecture Flow

1.  **Scrape**: The agent visits the target URL using Playwright.
2.  **Asset Heist**: Downloads all linked files (images, audio, text) to a temporary workspace.
3.  **Media Analysis**: Transcribes audio and captions images to create a text-based context.
4.  **Pass 1 (Analyst)**: The LLM reviews the HTML + Media Context and generates a step-by-step **JSON Plan**.
5.  **Pass 2 (Developer)**: A Coding LLM writes a Python script based strictly on the Analyst's plan.
6.  **Execution**: The script is executed locally.
      * *If Success*: The answer is POSTed to the validation endpoint.
      * *If Failure*: The error/stack trace is sent back to **Pass 1** to re-plan.
7.  **Recursive Progression**: If the answer is correct, the agent parses the "Next URL" and recurses to solve the next level.

-----

## âš™ï¸ Tech Stack

  * **Framework**: FastAPI, Uvicorn
  * **AI/LLM**: OpenAI SDK (compatible with DeepSeek, Grok, Gemini, etc.)
  * **Browser Automation**: Playwright (Chromium)
  * **Data Processing**: Pandas, NumPy, BeautifulSoup4
  * **Utils**: Base64, Subprocess, Threading

-----

## ğŸ“¦ Installation

### 1\. Clone the Repository

```bash
git clone https://github.com/prasanacodes/ai-quiz-solver.git
cd ai-quiz-solver
```

### 2\. Install Dependencies

```bash
pip install fastapi uvicorn requests openai playwright beautifulsoup4 pandas numpy pydantic
```

### 3\. Install Playwright Browsers

Required for the scraping engine to work.

```bash
playwright install chromium
```

-----

## ğŸ”§ Configuration

Open the `main.py` file and configure your API Keys and Endpoints at the top of the file:

```python
# Security
MY_SECRET = "your-defined-secret-token"

# LLM Configuration
LLM_API_KEY = "your-openrouter-or-openai-key"
LLM_GEN_BASE_URL = "https://aipipe.org/openrouter/v1" 

# Model Selection
LLM_MODEL_ANALYST = "deepseek/deepseek-chat-v3.1" 
LLM_MODEL_DEV = "x-ai/grok-code-fast-1" 
```

-----

## ğŸƒâ€â™‚ï¸ Usage

### 1\. Start the Server

Run the FastAPI server. It runs on port 8000 by default.

```bash
python main.py
```

### 2\. Trigger the Agent

Send a POST request to start the agent on a specific URL. The agent runs in a background thread.

**Using cURL:**

```bash
curl -X POST http://localhost:8000/solve-quiz \
-H "Content-Type: application/json" \
-d '{
    "email": "your-email@example.com",
    "secret": "your-defined-secret-token",
    "url": "https://quiz-domain.com/start-question"
}'
```

### 3\. Monitor Progress

The agent prints detailed logs to the terminal console, showing:

  * Scraping status
  * Downloaded files
  * Analyst's Plan (JSON)
  * Developer's Code
  * Execution Output
  * Server Response (Correct/Incorrect)

-----

## ğŸ›¡ï¸ Security Warning

> **âš ï¸ CAUTION: Remote Code Execution**
>
> This application uses Python's `exec()` function to run code generated by an AI. While this is necessary for solving dynamic puzzles, it poses a security risk.
>
>   * **Do not run this on a production server with sensitive data.**
>   * **Run this inside a Docker container** or a virtual machine to isolate the execution environment.
>   * The code creates a temporary `downloads/` directory which is wiped after every successful question.

-----

## ğŸ¤ Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

## ğŸ“„ License

[MIT](https://raw.githubusercontent.com/prasanacodes/TDS-P2/refs/heads/main/LICENSE)
